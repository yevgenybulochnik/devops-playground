- name: Add user PPAs
  apt_repository:
    repo: "{{ item }}"
    state: present
  with_items:
    - "{{ PPAS }}"
  when: PPAS is defined

- name: Install packages
  apt:
    name: "{{ item }}"
    state: latest
    update_cache: yes
  with_items:
    - "{{ packages }}"
  when: packages is defined

- name: Get node.js version 10
  get_url:
    url: https://deb.nodesource.com/setup_10.x
    dest: /tmp/

- name: Execute node setup
  command: bash /tmp/setup_10.x

- name: Install node
  apt:
    name: nodejs
    state: latest
    update_cache: yes
